- project:
    name: rbac
    meta_path_project: 'enterprise/production/rbac.yaml'
    value_stream: enterprise

    github_user: 'puppetlabs'
    github_project: 'pe-rbac-service'

    hipchat_room: 'RBAC'

    package_build_version_varname: 'PE_CONSOLE_SERVICES_BUILD_VERSION'

    default_platform_axis: centos6 redhat7 ubuntu1404
    default_layout_axis: 64mdcal
    default_ldap_type_axis: 'active_directory openldap'

    git_excluded_regions:
            - 'doc/.*'
            - 'README.md'

    beaker_type: 'pe'
    preserve_hosts: 'onfail'
    kickoff_disabled: False
    genconfig: "bundle exec genconfig2 $PLATFORM-$LAYOUT"

    packaging_github_project: 'pe-console-services'

    beaker_optionsfile: 'integration/options.rb'
    beaker_testsuite: 'integration/tests'

    init_mergely_predefined_parameters: |
        LAYOUT_AXIS=64mdcal
        PLATFORM_AXIS=centos6 ubuntu1404
    init_periodic_predefined_parameters: |
        LAYOUT_AXIS=64mdcal 64m-32adcal
        PLATFORM_AXIS=centos6 centos7 redhat7 ubuntu1404

    timed_trigger_cron: 'H H(21-23) * * *'

    jobs:
        - 'init_merge-manual-periodic':
            scm_branch: master
            tpb_projects:
                - '{value_stream}_{name}_unit-clj_{scm_branch}'

        - 'init_merge-manual-periodic':
            scm_branch: stable
            tpb_projects:
                - '{value_stream}_{name}_unit-clj_{scm_branch}'

        - 'init_merge-manual-periodic':
            scm_branch: shallowgravy
            tpb_projects:
                - '{value_stream}_{name}_unit-clj_{scm_branch}'

        - 'rbac-unit-pipeline':
            scm_branch: "stable"
            puppet_branch: "stable"
            downstream_jobs:
                - 'enterprise_rbac_packaging-ezbake_multiproject_3.7_stable'
        - 'pe-console-services-acceptance-pipeline':
            pe_family: '3.7'
            scm_branch: "stable"
            puppet_branch: "stable"
            packaging_git_branch: '3.7.x'
        - '{value_stream}_{name}_release-clj_{qualifier}':
            dn-sort-index: ' Release-05:'
            tpb_projects: '{value_stream}_{name}_pkg-pe_{scm_branch}'
            scm_branch: 'stable'


        - 'rbac-unit-pipeline':
            scm_branch: "master"
            puppet_branch: "master"
            downstream_jobs:
                - 'enterprise_rbac_packaging-ezbake_multiproject_3.8_master'
        - 'pe-console-services-acceptance-pipeline':
            pe_family: '3.8'
            scm_branch: "master"
            puppet_branch: "master"
            packaging_git_branch: '3.8.x'
            packaging_sleep: 15
        - '{value_stream}_{name}_release-clj_{qualifier}':
            dn-sort-index: ' Release-05:'
            tpb_projects: '{value_stream}_{name}_pkg-pe_{scm_branch}'
            scm_branch: 'master'


        - 'rbac-unit-pipeline':
            scm_branch: "shallowgravy"
            puppet_branch: "master"
            downstream_jobs:
                - 'enterprise_rbac_packaging-ezbake_multiproject_4.0_shallowgravy'
        - 'pe-console-services-acceptance-pipeline':
            pe_family: '4.0'
            scm_branch: "shallowgravy"
            puppet_branch: "master"
            packaging_git_branch: '4.0.x'
            packaging_sleep: 10
        - '{value_stream}_{name}_release-clj_{qualifier}':
            dn-sort-index: ' Release-05:'
            tpb_projects: '{value_stream}_{name}_pkg-pe_{scm_branch}'
            scm_branch: 'shallowgravy'

