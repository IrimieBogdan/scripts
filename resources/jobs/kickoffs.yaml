- job-template:
    name: '{value_stream}_{name}_init-merge_{scm_branch}'
    scm:
        - git:
            url: '{git_url}'
            branches:
                - '{scm_branch}'
            excluded-regions: '{obj:git_excluded_regions}'
    display-name: '{name} ({scm_branch}){dn-sort-index} Mergely Kickoff'
    node: worker
    disabled: '{kickoff_disabled}'
    project-type: freestyle
    triggers:
        - pollscm: "H/5 * * * *"
    publishers:
        - trigger-parameterized-build:
            tpb_projects: '{tpb_projects}'
            tpb_predefined_parameters: '{tpb_predefined_parameters}'
            tpb_current_parameters: '{tpb_current_parameters}'
            tpb_condition: '{tpb_condition}'
            tpb_property_file: '{tpb_property_file}'
            tpb_git_revision: '{tpb_git_revision}'

- job-template:
    name: '{value_stream}_{name}_init_nightly-{scm_branch}'
    scm:
        - git:
            url: '{git_url}'
            branches:
                - '{scm_branch}'
            excluded-regions: '{obj:git_excluded_regions}'
    display-name: '{name} ({scm_branch}){dn-sort-index} Nightly Kickoff'
    node: worker
    disabled: '{kickoff_disabled}'
    project-type: freestyle
    triggers:
        - timed: "@midnight"
    publishers:
        - trigger-parameterized-build:
            tpb_projects: '{tpb_projects}'
            tpb_predefined_parameters: '{tpb_predefined_parameters}'
            tpb_current_parameters: '{tpb_current_parameters}'
            tpb_condition: '{tpb_condition}'
            tpb_property_file: '{tpb_property_file}'
            tpb_git_revision: '{tpb_git_revision}'
