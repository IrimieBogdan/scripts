- job-group:
    name: 'acceptance-beaker_pe-razor-server'
    meta_path_jobgroup: 'resources/pipelines/acceptance-beaker.yaml'
    jobs:
        - '{value_stream}_{name}_pkg-pe_{qualifier}':
            qualifier: '{pe_family}.x-{scm_branch}'
            dn-sort-index: ' 10:'
            dn-qualifier: ' PE {pe_family}.x pe-razor-server Package'
            tpb_projects:
                - '{value_stream}_{name}_integration-system_smoke_{pe_family}.x-{scm_branch}'

        - '{value_stream}_{name}_integration-system_{qualifier}':
            qualifier: 'smoke_{pe_family}.x-{scm_branch}'
            dn-sort-index: ' 20:'
            dn-qualifier: ' PE {pe_family}.x Smoke'
            is-pe: "true"
            beaker_loadpath: 'lib'
            beaker_optionsfile: ''
            beaker_helper: 'lib/helper.rb'
            beaker_presuite: 'suites/pre_suite/install-server-from-package'
            beaker_testsuite: 'suites/tests/smoke'
            beaker_postsuite: ''
            tpb_projects:
                - '{value_stream}_{name}_integration-system_full-module_{pe_family}.x-{scm_branch}'
                - '{value_stream}_{name}_integration-system_full-package_{pe_family}.x-{scm_branch}'

        - '{value_stream}_{name}_integration-system_{qualifier}':
            qualifier: 'full-package_{pe_family}.x-{scm_branch}'
            dn-sort-index: ' 21:'
            dn-qualifier: ' PE {pe_family}.x Full - Package Install'
            is-pe: "true"
            beaker_loadpath: 'lib'
            beaker_optionsfile: ''
            beaker_helper: 'lib/helper.rb'
            beaker_presuite: 'suites/pre_suite/install-server-from-package'
            beaker_testsuite: 'suites/tests/smoke,suites/tests/full'
            beaker_postsuite: ''

        - '{value_stream}_{name}_integration-system_{qualifier}':
            qualifier: 'full-module_{pe_family}.x-{scm_branch}'
            dn-sort-index: ' 21:'
            dn-qualifier: ' PE {pe_family}.x Full - Module Install'
            is-pe: "true"
            beaker_loadpath: 'lib'
            beaker_optionsfile: ''
            beaker_helper: 'lib/helper.rb'
            beaker_presuite: 'suites/pre_suite/install-server-from-module'
            beaker_testsuite: 'suites/tests/smoke,suites/tests/full'
            beaker_postsuite: ''

- job-group:
    name: 'acceptance-clj-ezbake-test-dependent'
    meta_path_jobgroup: 'resources/pipelines/acceptance-beaker.yaml'

    jobs:

        - '{value_stream}_{name}_packaging-ezbake_multiproject_{qualifier}':
            meta_description: |
                <p> This job is intended to build an ezbake-based package for
                <b>{packaging_github_project}</b> package using
                <b>{packaging_git_branch}</b> branch. If the package build is
                successful, the resulting artifact is tested using acceptance
                tests from <b>{acceptance_git_branch}</b> branch of
                <b>https://github.com/{github_user}/{acceptance_github_project}</b>
            console_timeout: 40
            qualifier: '{packaging_github_project}-{packaging_git_branch}_{acceptance_github_project}-{acceptance_git_branch}_{scm_branch}'
            dn-qualifier: '10: Build {packaging_github_project} ({packaging_git_branch}) package with {acceptance_github_project} ({acceptance_git_branch}) '
            tpb_git_revision: False
            tpb_projects:
                - '{value_stream}_{name}_integration-system_{packaging_github_project}-{packaging_git_branch}_{acceptance_github_project}-{acceptance_git_branch}_{scm_branch}'

        - '{value_stream}_{name}_integration-system_{qualifier}':
            git_url: 'git@github.com:{github_user}/{acceptance_github_project}.git'
            github_http_url: 'https://github.com/{github_user}/{acceptance_github_project}'

            qualifier: '{packaging_github_project}-{packaging_git_branch}_{acceptance_github_project}-{acceptance_git_branch}_{scm_branch}'
            dn-qualifier: '20: Test {name} using {packaging_github_project} ({packaging_git_branch}) package and {acceptance_github_project} ({acceptance_git_branch})'

- job-group:
    name: 'pe-console-services-acceptance-pipeline'

    acceptance_github_project: ''
    acceptance_git_branch: ''

    jobs:
        - '{value_stream}_{name}_packaging-ezbake_multiproject_{qualifier}':
            qualifier: '{pe_family}_{scm_branch}'
            dn-sort-index: ' 10:'
            tpb_projects: '{value_stream}_{name}_integration-system_full-{pe_family}_{scm_branch}'

        - '{value_stream}_{name}_integration-system_{qualifier}':
            qualifier: 'full-{pe_family}_{scm_branch}'
            dn-sort-index: ' 25:'
            dn-qualifier: ' PE {pe_family}.x Full'
            is-pe: "true"
