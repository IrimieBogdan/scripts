- project:
    name: puppet-server
    meta_path_project: 'platform/production/puppet-server.yaml'
    value_stream: platform

    github_user: 'puppetlabs'
    github_project: 'puppet-server'

    hipchat_room:
        - 'Puppet Server (aka PE Green Team)'

    # Used to set values on the integration jobs themselves.
    default_platform_axis: centos6 centos7 redhat5 redhat6 redhat7 ubuntu1204 ubuntu1404
    default_layout_axis: 64mdca 64mdca-64a

    genconfig: "bundle exec genconfig2 $PLATFORM-$LAYOUT"
    preserve_hosts: 'onfail'

    console_timeout: '20'
    kickoff_disabled: False


    jobs:
        #-----------------------------------------------------------------------
        # "stable" branch pipelines
        #-----------------------------------------------------------------------
        - 'init_merge-manual-periodic':
            scm_branch: stable

            init_mergely_predefined_parameters: |
                LAYOUT_AXIS=64mdca
                PLATFORM_AXIS=centos6 centos7 ubuntu1404
                SHIP_NIGHTLY=FALSE
            init_periodic_predefined_parameters: |
                LAYOUT_AXIS=64mdca 64mdca-64a
                PLATFORM_AXIS=centos6 centos7 redhat5 redhat6 redhat7 ubuntu1204 ubuntu1404
                SHIP_NIGHTLY=FALSE

            tpb_projects:
                - '{value_stream}_{name}_unit-clj_{scm_branch}'

        - 'foss_puppet-server_full-lein-ezbake':
            scm_branch: 'stable'
            beaker_type: 'foss'

        #-----------------------------------------------------------------------
        # "master" branch pipelines
        #-----------------------------------------------------------------------
        - 'init_merge-manual-periodic':
            scm_branch: master

            default_platform_axis: ''
            default_layout_axis: "redhat7-64ma"
            init_mergely_predefined_parameters: |
                LAYOUT_AXIS=redhat6-64ma redhat7-64m-windows2008r2-64a ubuntu1404-64ma
                PLATFORM_AXIS=
                SHIP_NIGHTLY=FALSE
            init_periodic_predefined_parameters: |
                LAYOUT_AXIS=debian7-64m-32a debian7-64ma redhat6-64m-32a redhat6-64ma redhat7-64m-64a redhat7-64ma redhat7-64m-windows2008r2-64a ubuntu1204-64m-32a ubuntu1204-64ma ubuntu1404-64m-32a ubuntu1404-64ma ubuntu1404-64m-windows2008r2-64a
                PLATFORM_AXIS=
                SHIP_NIGHTLY=FALSE

            tpb_projects:
                - '{value_stream}_{name}_unit-clj_{scm_branch}'

        - 'foss_puppet-server_full-lein-ezbake':
            scm_branch: 'master'

            beaker_type: 'aio'

            genconfig: "bundle exec genconfig2 $LAYOUT"
            default_platform_axis: ''
            default_layout_axis: "redhat7-64ma"

        #-----------------------------------------------------------------------
        # temp "2.1.x" branch pipelines
        #-----------------------------------------------------------------------
        - 'init_merge-manual-periodic':
            scm_branch: '2.1.x'

            default_platform_axis: ''
            default_layout_axis: "redhat7-64ma"
            init_mergely_predefined_parameters: |
                LAYOUT_AXIS=redhat6-64ma redhat7-64m-windows2008r2-64a ubuntu1404-64ma
                PLATFORM_AXIS=
                SHIP_NIGHTLY=FALSE
            init_periodic_predefined_parameters: |
                LAYOUT_AXIS=debian7-64m-32a debian7-64ma redhat6-64m-32a redhat6-64ma redhat7-64m-64a redhat7-64ma redhat7-64m-windows2008r2-64a ubuntu1204-64m-32a ubuntu1204-64ma ubuntu1404-64m-32a ubuntu1404-64ma ubuntu1404-64m-windows2008r2-64a
                PLATFORM_AXIS=
                SHIP_NIGHTLY=FALSE

            tpb_projects:
                - '{value_stream}_{name}_unit-clj_{scm_branch}'

        - 'foss_puppet-server_full-lein-ezbake':
            scm_branch: '2.1.x'

            beaker_type: 'aio'

            genconfig: "bundle exec genconfig2 $LAYOUT"
            default_platform_axis: ''
            default_layout_axis: "redhat7-64ma"
